<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PulseMap Persoonlikheidsgedrag Analise</title>
    <meta property="og:title" content="PulseMap Persoonlikheidsgedrag Analise">
    <meta property="og:description" content="Ontdek jou persoonlikheidstipe met ons PulseMap vraelys.">
    <meta property="og:image" content="https://i.imgur.com/Zx34Iky.png">
    <meta property="og:url" content="https://qgroenewald-disk.github.io/mbti-analise/">
    <meta property="og:type" content="website">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Define CSS variables for consistent theming */
        :root {
            --primary-color: #005A9C; /* Matching the primary color from Funksioneringstyl Assessment */
            --secondary-color: #f4f4f9;
            --text-color: #333;
            --border-color: #ddd;
            --error-color: #D8000C;
            --success-color: #4F8A10;
        }

        /* Import Poppins font */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

        /* General Body Styles */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--secondary-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
        }

        /* Container Styling */
        .container {
            max-width: 800px;
            margin: 20px auto;
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* Headings */
        h1, h2 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 25px;
            font-weight: 600;
        }

        /* Intro Text */
        .intro-text {
            text-align: center;
            margin-bottom: 30px;
            line-height: 1.8;
            color: #555;
            font-size: 1.05em;
        }

        /* Form Group (for name/email) */
        .mb-6 {
            margin-bottom: 20px;
        }

        .mb-6 label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-color);
        }

        .mb-6 input[type="text"],
        .mb-6 input[type="email"] {
            width: calc(100% - 20px);
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 16px;
            box-sizing: border-box;
            transition: border-color 0.3s ease;
        }

        .mb-6 input[type="text"]:focus,
        .mb-6 input[type="email"]:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        /* Questions Container */
        #questionsContainer {
            margin-top: 30px;
        }

        /* Question Card */
        .question-card {
            background-color: #f9f9f9;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .question-card p {
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--primary-color);
            font-size: 1.15em;
            line-height: 1.5;
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        /* Option Button */
        .option-button {
            background-color: #e9ecef;
            border: 1px solid #ced4da;
            padding: 12px 18px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            text-align: left;
            transition: all 0.3s ease;
            color: #495057;
            display: flex;
            align-items: center;
            line-height: 1.4;
        }

        .option-button:hover {
            background-color: #dee2e6;
            border-color: #adb5bd;
        }

        .option-button.selected {
            background-color: var(--primary-color);
            color: #fff;
            border-color: var(--primary-color);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
            transform: translateY(-2px);
        }

        /* Button Group */
        .button-group {
            text-align: center;
            margin-top: 30px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .button-group button {
            background-color: var(--primary-color);
            color: #fff;
            padding: 14px 30px;
            border: none;
            border-radius: 6px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            font-weight: 600;
            flex-grow: 1;
            max-width: 300px;
        }

        .button-group button:hover:not(:disabled) {
            background-color: #004a80;
            transform: translateY(-2px);
        }

        .button-group button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            opacity: 0.7;
        }

        /* Results Section */
        .results-section {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            text-align: center;
        }

        .results-section h2 {
            margin-bottom: 20px;
        }

        #mbtiResultDisplay {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 25px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .style-description {
            background-color: #f0f8ff;
            border: 1px solid #cceeff;
            border-radius: 8px;
            padding: 20px;
            text-align: left;
            margin-top: 20px;
            line-height: 1.7;
            font-size: 0.95em;
            color: #444;
        }

        .submission-message {
            margin-top: 20px;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
            text-align: center;
        }
        .email-success {
            background-color: #DFF2BF;
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }
        .email-error {
            background-color: #FFBABA;
            color: var(--error-color);
            border: 1px solid var(--error-color);
        }
        .email-info {
            background-color: #cce5ff;
            color: #004085;
            border: 1px solid #b8daff;
        }

        .hidden {
            display: none;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                margin: 10px auto;
                padding: 20px;
            }
            .options-grid {
                grid-template-columns: 1fr;
            }
            .button-group {
                flex-direction: column;
                gap: 15px;
            }
            .button-group button {
                max-width: 100%;
            }
        }
    </style>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script type="text/javascript">
        emailjs.init({
            publicKey: "rES387Z_beB0IEiRm",
        });
    </script>
</head>
<body>
    <div class="container">
        <h1>PulseMap Persoonlikheidsgedrag Analise</h1>
        <p class="intro-text">
            Hierdie assessering help jou om jou persoonlikheidstipe te ontdek gebaseer op jou voorkeure in verskillende areas. Beantwoord asseblief elke vraag eerlik om die mees akkurate resultate te kry.
        </p>

        <form id="personality-form">
            <div class="mb-6">
                <label for="userName" class="block text-gray-700 text-sm font-bold mb-2">Jou Naam:</label>
                <input type="text" id="userName" name="userName" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
            </div>
            <div class="mb-6">
                <label for="userEmail" class="block text-gray-700 text-sm font-bold mb-2">Jou E-pos:</label>
                <input type="email" id="userEmail" name="userEmail" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
            </div>

            <div id="questionsContainer">
                </div>

            <div class="button-group">
                <button type="button" id="backButton" class="hidden">Terug</button>
                <button type="submit" id="submitBtn">Bereken Resultate</button>
            </div>
            <p id="submissionMessage" class="submission-message hidden"></p>
        </form>

        <div id="resultsContainer" class="results-section hidden">
            <h2>Jou Persoonlikheidstipe:</h2>
            <p id="mbtiResultDisplay"></p>
            <div id="personalityDescription" class="style-description">
                </div>
        </div>
    </div>

    <script>
        const questionsData = [
            {
                "id": "e_i",
                "question_af": "As jy op 'n partytjie is, is jy:",
                "options_af": [
                    {"text_af": "Meestal stil en teruggetrokke", "value": "I"},
                    {"text_af": "Spraaksaam en uitgaande", "value": "E"}
                ]
            },
            {
                "id": "s_n",
                "question_af": "Stel jy meer belang in:",
                "options_af": [
                    {"text_af": "Die praktiese en realistiese aspekte van die lewe", "value": "S"},
                    {"text_af": "Nuwe idees en moontlikhede", "value": "N"}
                ]
            },
            {
                "id": "t_f",
                "question_af": "As jy besluite neem, is jy geneig om te wees:",
                "options_af": [
                    {"text_af": "Logies en objektief", "value": "T"},
                    {"text_af": "Empaties en bedagsaam teenoor ander se gevoelens", "value": "F"}
                ]
            },
            {
                "id": "j_p",
                "question_af": "Verkies jy om:",
                "options_af": [
                    {"text_af": "Dinge gevestig en georganiseerd te hê", "value": "J"},
                    {"text_af": "Jou opsies oop te hou en buigsaam te wees", "value": "P"}
                ]
            },
            {
                "id": "e_i2",
                "question_af": "Na 'n sosiale byeenkoms, voel jy gewoonlik:",
                "options_af": [
                    {"text_af": "Energiek en gereed vir meer", "value": "E"},
                    {"text_af": "Uitgeput en het alleen tyd nodig", "value": "I"}
                ]
            },
            {
                "id": "s_n2",
                "question_af": "Watter een beskryf jou beter:",
                "options_af": [
                    {"text_af": "Fokus op die hede en wat werklik is", "value": "S"},
                    {"text_af": "Dink aan toekomstige moontlikhede en abstrakte konsepte", "value": "N"}
                ]
            },
            {
                "id": "t_f2",
                "question_af": "Wanneer jy konstruktiewe kritiek moet gee, is jy:",
                "options_af": [
                    {"text_af": "Direk en feite-gebaseerd", "value": "T"},
                    {"text_af": "Sagmoedig en fokus op die handhawing van harmonie", "value": "F"}
                ]
            },
            {
                "id": "j_p2",
                "question_af": "Is jou natuurlike toestand om te wees:",
                "options_af": [
                    {"text_af": "Beplan en gestruktureerd", "value": "J"},
                    {"text_af": "Spontaan en aanpasbaar", "value": "P"}
                ]
            }
        ];

        const resultsDescriptions_af = {
            "ISTJ": "Prakties, feitelik en logies. Hulle is verantwoordelik en georganiseerd, en verkies duidelike riglyne en tradisies.",
            "ISFJ": "Warm, bedagsaam en pligsgetrou. Hulle is detail-georiënteerd en toegewyd aan hul verantwoordelikhede.",
            "INFJ": "Insiggewend, empaties en georganiseerd. Hulle is visioenêre wat diep omgee vir ander en sterk waardes het.",
            "INTJ": "Strategies, onafhanklik en logies. Hulle word gedryf deur 'n behoefte aan bevoegdheid en innovasie.",
            "ISTP": "Prakties, oplettend en spontaan. Hulle is praktiese probleemoplossers wat dit geniet om te ondersoek hoe dinge werk.",
            "ISFP": "Sagmoedig, artisties en aanpasbaar. Hulle leef in die hede en waardeer skoonheid en sensoriese ervarings.",
            "INFP": "Idealisties, kreatief en deernisvol. Hulle word gedryf deur hul waardes en soek betekenis in die lewe.",
            "INTP": "Analities, nuuskierig en innoverend. Hulle is logiese probleemoplossers wat lief is vir teoretiese konsepte en abstrakte idees.",
            "ESTP": "Energiek, prakties en aksie-georiënteerd. Hulle is waaghalsig en floreer in dinamiese omgewings.",
            "ESFP": "Uitgaande, spontaan en lief vir pret. Hulle geniet dit om die middelpunt van aandag te wees en in die oomblik te leef.",
            "ENFP": "Entoesiasties, kreatief en gesellig. Hulle is inspirerend en geniet dit om nuwe idees en moontlikhede te ondersoek.",
            "ENTP": "Innoverend, nuuskierig en spitsvondig. Hulle geniet debatte en om gevestigde norme uit te daag.",
            "ESTJ": "Georganiseerd, beslissend en tradisioneel. Hulle is natuurlike leiers wat doeltreffendheid en struktuur waardeer.",
            "ESFJ": "Warm, samewerkend en gewild. Hulle is prakties en fokus op die hulp van ander en die handhawing van sosiale harmonie.",
            "ENFJ": "Charismaties, empaties en inspirerend. Hulle is natuurlike leiers wat passievol is oor die hulp van ander om te groei.",
            "ENTJ": "Oorheersend, strategies en doeltreffend. Hulle is natuurlike leiers wat dit geniet om mense te organiseer en te rig."
        };

        let selectedAnswers = {};
        let currentQuestionIndex = 0;

        const form = document.getElementById('personality-form');
        const questionsContainer = document.getElementById('questionsContainer');
        const submitBtn = document.getElementById('submitBtn');
        const resultsContainer = document.getElementById('resultsContainer');
        const mbtiResultDisplay = document.getElementById('mbtiResultDisplay');
        const personalityDescription = document.getElementById('personalityDescription');
        const backButton = document.getElementById('backButton');
        const submissionMessage = document.getElementById('submissionMessage');

        function showSubmissionMessage(message, type) {
            submissionMessage.textContent = message;
            submissionMessage.className = `submission-message ${type ? `email-${type}` : ''}`;
            submissionMessage.classList.remove('hidden');
        }

        function renderQuestions() {
            questionsContainer.innerHTML = ''; // Clear previous questions
            if (currentQuestionIndex < questionsData.length) {
                const q = questionsData[currentQuestionIndex];
                const questionCard = document.createElement('div');
                questionCard.classList.add('question-card');
                questionCard.innerHTML = `
                    <p>${currentQuestionIndex + 1}. ${q.question_af}</p>
                    <div class="options-grid">
                        ${q.options_af.map(option => `
                            <button type="button" class="option-button" data-value="${option.value}">
                                ${option.text_af}
                            </button>
                        `).join('')}
                    </div>
                `;
                questionsContainer.appendChild(questionCard);

                // Highlight previously selected answer if exists
                if (selectedAnswers[q.id]) {
                    questionCard.querySelector(`button[data-value="${selectedAnswers[q.id]}"]`).classList.add('selected');
                }

                questionCard.querySelectorAll('.option-button').forEach(button => {
                    button.addEventListener('click', (event) => {
                        // Deselect any previously selected button in this question
                        questionCard.querySelectorAll('.option-button').forEach(btn => btn.classList.remove('selected'));
                        // Select the clicked button
                        event.target.classList.add('selected');
                        selectedAnswers[q.id] = event.target.dataset.value;

                        // Automatically move to the next question
                        setTimeout(() => {
                            if (currentQuestionIndex < questionsData.length - 1) {
                                currentQuestionIndex++;
                                renderQuestions();
                                backButton.classList.remove('hidden');
                            } else {
                                submitBtn.classList.remove('hidden');
                            }
                        }, 300); // Small delay for visual feedback
                    });
                });
            } else {
                // All questions displayed, show submit button
                submitBtn.classList.remove('hidden');
            }
            updateNavigationButtons();
        }

        function updateNavigationButtons() {
            if (currentQuestionIndex > 0) {
                backButton.classList.remove('hidden');
            } else {
                backButton.classList.add('hidden');
            }
            if (currentQuestionIndex === questionsData.length) {
                submitBtn.classList.remove('hidden');
            } else {
                submitBtn.classList.add('hidden');
            }
        }

        backButton.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestions();
            }
        });

        function calculatePersonality(answers) {
            let counts = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            for (const key in answers) {
                const type = answers[key];
                if (counts.hasOwnProperty(type)) {
                    counts[type]++;
                }
            }

            let personalityType = "";
            personalityType += (counts.E >= counts.I) ? "E" : "I";
            personalityType += (counts.S >= counts.N) ? "S" : "N";
            personalityType += (counts.T >= counts.F) ? "T" : "F";
            personalityType += (counts.J >= counts.P) ? "J" : "P";

            return { personalityType: personalityType, counts: counts };
        }

        form.addEventListener('submit', async (event) => {
            event.preventDefault();

            const userName = document.getElementById('userName').value;
            const userEmail = document.getElementById('userEmail').value;

            if (!userName || !userEmail) {
                showSubmissionMessage("Vul asseblief jou naam en e-pos in.", 'error');
                return;
            }

            if (Object.keys(selectedAnswers).length !== questionsData.length) {
                showSubmissionMessage('Beantwoord asseblief alle vrae voordat resultate bereken word.', 'error');
                return;
            }

            const { personalityType } = calculatePersonality(selectedAnswers);

            submitBtn.disabled = true;
            submitBtn.textContent = "Besig om in te dien...";
            showSubmissionMessage("Jou resultate word gestuur...", 'info');

            const templateParams = {
                client_name: userName, // Changed 'user_name' to 'client_name'
                personality_result: personalityType
            };

            try {
                const response = await emailjs.send('service_b087h4p', 'template_n84drg8', templateParams);
                console.log('E-pos suksesvol gestuur!', response.status, response.text);
                showSubmissionMessage('Jou resultate is suksesvol ingedien!', 'success');
                
                // Update results display
                document.getElementById('mbtiResultDisplay').textContent = personalityType;
                document.getElementById('personalityDescription').textContent = resultsDescriptions_af[personalityType] || "Geen beskrywing beskikbaar nie.";
                document.getElementById('resultsContainer').classList.remove('hidden');

                // Hide form elements
                userNameInput.closest('.mb-6').classList.add('hidden'); // Hide the name input group
                document.getElementById('userEmail').closest('.mb-6').classList.add('hidden'); // Hide the email input group
                questionsContainer.classList.add('hidden');
                submitBtn.classList.add('hidden');
                backButton.classList.remove('hidden');

            } catch (error) {
                console.error('Kon nie e-pos stuur nie:', error);
                showSubmissionMessage('Kon nie resultate indien nie. Probeer asseblief weer.', 'error');
                submitBtn.disabled = false;
                submitBtn.textContent = "Bereken Resultate";
            }
        });

        document.addEventListener('DOMContentLoaded', renderQuestions);
    </script>
</body>
</html>
